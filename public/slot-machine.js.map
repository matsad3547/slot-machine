{"version":3,"sources":["webpack:///webpack/bootstrap 508592c8d614b3603573","webpack:///./src/js/main.js","webpack:///./src/js/Machine.js","webpack:///./src/js/Reel.js","webpack:///./src/js/ReelElement.js"],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;;;;;;AAEA,KAAI,UAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,EAAsB,GAAtB,CAAd;;AAEA,KAAI,UAAU,sBAAa,EAAb,EAAiB,OAAjB,CAAd;;AAEA,UAAS,cAAT,CAAwB,OAAxB,EAAiC,gBAAjC,CAAkD,OAAlD,EAA2D;AAAA,UAAM,QAAQ,cAAR,EAAN;AAAA,EAA3D,E;;;;;;ACRA;;;;;;;;AAEA;;;;;;;;KAEqB,O;AAEnB,oBAAY,MAAZ,EAAoB,OAApB,EAA6B;AAAA;;AAC3B,UAAK,OAAL,GAAe,OAAf;AACA,UAAK,aAAL,GAAqB,MAArB;;AAEA,UAAK,IAAL;AACD;;;;4BAEM;AAAA;;AACL,WAAI,QAAQ,KAAK,cAAL,CAAoB,SAAS,gBAAT,CAA0B,aAA1B,CAApB,CAAZ;AACA,YAAK,KAAL,GAAa,MAAM,GAAN,CAAU,cAAM;AAC3B,gBAAO,MAAK,UAAL,CAAgB,MAAK,aAArB,EAAoC,EAApC,EAAwC,MAAK,OAA7C,CAAP;AACD,QAFY,CAAb;AAGD;;;gCAEU,M,EAAQ,I,EAAM,O,EAAS;AAChC,cAAO,mBAAS,MAAT,EAAiB,IAAjB,EAAuB,OAAvB,CAAP;AACD;;;sCAEgB;AACf,YAAK,MAAL,GAAc,KAAK,KAAL,CAAW,GAAX,CAAgB;AAAA,gBAAQ,KAAK,OAAL,EAAR;AAAA,QAAhB,CAAd;;AAEA,WAAI,KAAK,WAAL,CAAiB,KAAK,MAAtB,CAAJ,EAAmC;AACjC,kBAAS,IAAT,CAAc,KAAd,CAAoB,eAApB,GAAsC,OAAtC;AACD,QAFD,MAEO;AACL,kBAAS,IAAT,CAAc,KAAd,CAAoB,eAApB,GAAsC,SAAtC;AACD;;AAED,eAAQ,GAAR,CAAY,KAAK,WAAL,CAAiB,KAAK,KAAtB,CAAZ;AACD;;;oCAEc,Q,EAAU;AACvB,cAAO,MAAM,SAAN,CAAgB,GAAhB,CAAoB,IAApB,CAAyB,QAAzB,EAAmC;AAAA,gBAAM,EAAN;AAAA,QAAnC,CAAP;AACD;;;iCAEW,W,EAAa;AACvB,WAAI,QAAQ,KAAZ;AACA,YAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,YAAY,MAAZ,GAAqB,CAAzC,EAA4C,GAA5C,EAAiD;AAC/C,iBAAQ,YAAY,CAAZ,MAAmB,YAAY,IAAI,CAAhB,CAA3B;AACA,aAAI,UAAU,KAAd,EAAqB;AACtB;AACD,cAAO,KAAP;AACD;;;;;;mBA3CkB,O;;;;;;ACJrB;;;;;;;;AAEA;;;;;;;;;;KAEqB,I;AACnB,iBAAY,eAAZ,EAA6B,IAA7B,EAAmC,OAAnC,EAA4C;AAAA;;AAC1C,UAAK,eAAL,GAAuB,eAAvB;AACA,UAAK,IAAL,GAAY,IAAZ;AACA,UAAK,cAAL,GAAsB,OAAtB;AACA,UAAK,EAAL,GAAU,KAAK,YAAL,CAAkB,WAAlB,CAAV;AACA,UAAK,YAAL,GAAoB,GAApB;AACA,UAAK,qBAAL,GAA6B,CAA7B;AACA,UAAK,kBAAL,GAA0B,KAAK,mBAAL,EAA1B;;AAEA,UAAK,IAAL;AACD;;;;4BAEM;AAAA;;AACL,WAAI,YAAY,KAAK,IAAL,CAAU,WAAV,CAAsB,SAAS,aAAT,CAAuB,KAAvB,CAAtB,CAAhB;;AAEA,YAAK,kBAAL,CACG,GADH,CACQ;AAAA,gBAAU,MAAK,cAAL,CAAoB,MAApB,EAA4B,SAA5B,CAAV;AAAA,QADR;;AAGA,YAAK,IAAL,CAAU,WAAV,CAAsB,UAAU,SAAV,CAAoB,IAApB,CAAtB;;AAEA,YAAK,IAAL,CAAU,SAAV,GAAsB,KAAK,YAAL,GAAoB,CAA1C;AACA,YAAK,WAAL,GAAmB,KAAnB;AACD;;;+BAES;AACR,WAAI,KAAK,WAAT,EAAsB;AACtB,YAAK,WAAL,GAAmB,IAAnB;;AAEA,WAAI,OAAO,IAAX;AAAA,WACE,WAAW,IADb;;AAEE;AACA,0BAAmB,KAAK,MAAL,KAAgB,CAAhB,GAAoB,EAApB,GAAyB,CAH9C;AAAA,WAIE,OAAO,KAAK,IAJd;AAAA,WAKE,gBAAgB,KAAK,IAAL,CAAU,SAL5B;;AAOA,YAAK,qBAAL,IAA8B,gBAA9B;AACA,YAAK,qBAAL,GAA6B,KAAK,qBAAL,GAA6B,KAAK,kBAAL,CAAwB,MAAxB,GAAiC,CAA9D,GAC3B,KAAK,qBAAL,GAA6B,KAAK,kBAAL,CAAwB,MAD1B,GAE3B,KAAK,qBAFP;;AAIA,YAAK,aAAL,CAAmB;AACjB,mBAAU,QADO;AAEjB,iBAAQ,KAAK,cAFI;AAGjB,aAHiB,gBAGZ,QAHY,EAGF;AACb,eAAI,KAAK,SAAL,GAAiB,KAAK,YAAL,GAAkB,CAAvC,EAA0C;AACxC,6BAAgB,gBAAgB,KAAK,IAAL,CAAU,YAAV,GAAuB,CAAvC,GAA2C,KAAK,YAAhE;AACA;AACD;;AAED,eAAI,YAAY,mBAAmB,KAAK,YAAxB,GAAuC,QAAvD;AACA,gBAAK,SAAL,GAAiB,gBAAgB,SAAjC;AACD;AAXgB,QAAnB;;AAcA,cAAO,KAAK,gBAAL,EAAP;AACD;;;oCAEc,Y,EAAc;AAC3B,cAAO,KAAK,GAAL,CAAS,YAAT,EAAuB,CAAvB,CAAP;AACD;;;mCAEa,O,EAAS;AACrB,WAAI,OAAO,IAAX;;AAEA,WAAI,QAAQ,YAAY,GAAZ,EAAZ;;AAEA,6BAAsB,SAAS,OAAT,CAAiB,IAAjB,EAAuB;AAC3C,aAAI,eAAe,CAAC,OAAO,KAAR,IAAiB,QAAQ,QAA5C;AACA,aAAI,eAAe,CAAnB,EAAsB,eAAe,CAAf;;AAEtB,aAAI,WAAW,QAAQ,MAAR,CAAe,YAAf,CAAf;AACA,iBAAQ,IAAR,CAAa,QAAb;;AAEA,aAAI,eAAe,CAAnB,EAAsB;AACpB,iCAAsB,OAAtB;AACD,UAFD,MAEO;AACL,gBAAK,WAAL,GAAmB,KAAnB;AACD;AACF,QAZD;AAaD;;;2CAEqB;AACpB,WAAI,MAAM,EAAV;AAAA,WACE,iBAAiB,KAAK,IAAL,CAAU,KAAK,eAAL,GAAuB,KAAK,cAAL,CAAoB,MAArD,CADnB;;AAGA,YAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,cAApB,EAAoC,GAApC,EAAyC;AAAA;;AACvC,sBAAI,IAAJ,gCAAY,KAAK,cAAjB;AACD;AACD,aAAM,IAAI,MAAJ,GAAa,KAAK,eAAlB,GACJ,IAAI,KAAJ,CAAU,CAAV,EAAa,KAAK,eAAlB,CADI,GACiC,GADvC;;AAGA,cAAO,IAAI,IAAJ,CAAS;AAAA,gBAAM,KAAK,MAAL,KAAgB,EAAtB;AAAA,QAAT,CAAP;AACD;;;oCAEc,M,EAAQ,W,EAAa;AAClC,cAAO,0BAAgB,MAAhB,EAAwB,WAAxB,EAAqC,KAAK,YAA1C,CAAP;AACD;;;wCAEkB;AACjB,cAAO,KAAK,kBAAL,CAAwB,KAAK,qBAA7B,CAAP;AACD;;;;;;mBArGkB,I;;;;;;ACJrB;;;;;;;;;;KAEqB,W;AACnB,wBAAY,MAAZ,EAAoB,WAApB,EAAiC,YAAjC,EAA+C;AAAA;;AAC7C,UAAK,MAAL,GAAc,MAAd;AACA,UAAK,WAAL,GAAmB,WAAnB;AACA,UAAK,YAAL,GAAoB,YAApB;;AAEA,UAAK,IAAL;AACD;;;;4BAEK;AACJ,WAAI,sCAAmC,KAAK,MAAxC,YAAJ;;AAEA,WAAI,MAAM,SAAS,aAAT,CAAuB,KAAvB,CAAV;AACA,WAAI,SAAJ,GAAgB,iBAAhB;AACA,WAAI,YAAJ,CAAiB,aAAjB,EAAgC,KAAK,MAArC;AACA,WAAI,KAAJ,CAAU,eAAV,GAA4B,IAA5B;AACA,WAAI,KAAJ,CAAU,MAAV,GAAsB,KAAK,YAA3B;;AAEA,YAAK,WAAL,CAAiB,WAAjB,CAA6B,GAA7B;AACD;;;;;;mBAnBkB,W","file":"slot-machine.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 508592c8d614b3603573\n **/","'use strict';\n\nimport Machine from \"./Machine\";\n\nlet symbols = [ 'A', 'A', 'A', 'D', 'E' ];\n\nlet machine = new Machine( 20, symbols );\n\ndocument.getElementById('start').addEventListener('click', () => machine.startAnimation());\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/main.js\n **/","'use strict';\n\nimport Reel from \"./Reel\";\n\nexport default class Machine {\n\n  constructor(length, symbols) {\n    this.symbols = symbols;\n    this.symbolsInReel = length;\n\n    this.init();\n  }\n\n  init() {\n    let nodes = this._getNodesArray(document.querySelectorAll('[data-reel]'));\n    this.reels = nodes.map(el => {\n      return this.createReel(this.symbolsInReel, el, this.symbols)\n    });\n  }\n\n  createReel(length, node, symbols) {\n    return new Reel(length, node, symbols)\n  }\n\n  startAnimation() {\n    this.result = this.reels.map( reel => reel.animate());\n\n    if (this.checkResult(this.result)) {\n      document.body.style.backgroundColor = 'green';\n    } else {\n      document.body.style.backgroundColor = '#ececec';\n    }\n\n    console.log(this.checkResult(this.reels));\n  }\n\n  _getNodesArray(nodeList) {\n    return Array.prototype.map.call(nodeList, el => el)\n  }\n\n  checkResult(resultArray) {\n    let isWin = false;\n    for (let i = 0; i < resultArray.length - 1; i++) {\n      isWin = resultArray[i] === resultArray[i + 1];\n      if (isWin === false) break;\n    }\n    return isWin;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Machine.js\n **/","'use strict';\n\nimport ReelElement from \"./ReelElement\";\n\nexport default class Reel {\n  constructor(countOfElements, node, symbols) {\n    this.countOfElements = countOfElements;\n    this.node = node;\n    this.arrayOfSymbols = symbols;\n    this.id = node.getAttribute('data-reel');\n    this.symbolHeight = 200;\n    this.currentSymbolPosition = 1;\n    this.realArrayOfSymbols = this._createSymbolsArray();\n\n    this.init();\n  }\n\n  init() {\n    let container = this.node.appendChild(document.createElement('div'));\n\n    this.realArrayOfSymbols\n      .map( symbol => this._createElement(symbol, container));\n\n    this.node.appendChild(container.cloneNode(true));\n\n    this.node.scrollTop = this.symbolHeight / 2;\n    this.isAnimating = false;\n  }\n\n  animate() {\n    if (this.isAnimating) return;\n    this.isAnimating = true;\n\n    let self = this,\n      duration = 1500,\n      // delay = 250 * this.id,\n      elementsToScroll = Math.random() * 4 + 15 | 0,\n      node = this.node,\n      currentScroll = this.node.scrollTop;\n\n    this.currentSymbolPosition += elementsToScroll;\n    this.currentSymbolPosition = this.currentSymbolPosition > this.realArrayOfSymbols.length - 1 ?\n      this.currentSymbolPosition - this.realArrayOfSymbols.length :\n      this.currentSymbolPosition;\n\n    this.animateHelper({\n      duration: duration,\n      timing: self.timingFunction,\n      draw(progress) {\n        if (node.scrollTop > node.scrollTopMax/2) {\n          currentScroll = currentScroll - self.node.scrollTopMax/2 - self.symbolHeight;\n          // ++self.currentSymbolPosition;\n        }\n\n        let scrollTop = elementsToScroll * self.symbolHeight * progress;\n        node.scrollTop = currentScroll + scrollTop;\n      }\n    });\n\n    return this.getCurrentSymbol();\n  }\n\n  timingFunction(timeFraction) {\n    return Math.pow(timeFraction, 2);\n  }\n\n  animateHelper(options) {\n    let self = this;\n\n    let start = performance.now();\n\n    requestAnimationFrame(function animate(time) {\n      let timeFraction = (time - start) / options.duration;\n      if (timeFraction > 1) timeFraction = 1;\n\n      let progress = options.timing(timeFraction)\n      options.draw(progress);\n\n      if (timeFraction < 1) {\n        requestAnimationFrame(animate);\n      } else {\n        self.isAnimating = false;\n      }\n    });\n  }\n\n  _createSymbolsArray() {\n    let arr = [],\n      divisionResult = Math.ceil(this.countOfElements / this.arrayOfSymbols.length);\n\n    for (let i = 0; i < divisionResult; i++) {\n      arr.push(...this.arrayOfSymbols);\n    }\n    arr = arr.length > this.countOfElements ?\n      arr.slice(0, this.countOfElements) : arr;\n\n    return arr.sort(() => Math.random() - .5);\n  }\n\n  _createElement(symbol, destination) {\n    return new ReelElement(symbol, destination, this.symbolHeight);\n  }\n\n  getCurrentSymbol() {\n    return this.realArrayOfSymbols[this.currentSymbolPosition];\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/Reel.js\n **/","'use strict';\n\nexport default class ReelElement {\n  constructor(symbol, destination, symbolHeight) {\n    this.symbol = symbol;\n    this.destination = destination;\n    this.symbolHeight = symbolHeight;\n\n    this.init();\n  }\n\n  init(){\n    let path = `url('static/assets/symbol${this.symbol}.png')`;\n\n    let div = document.createElement('div');\n    div.className = \"machine__symbol\";\n    div.setAttribute('data-symbol', this.symbol);\n    div.style.backgroundImage = path;\n    div.style.height = `${this.symbolHeight}px`;\n\n    this.destination.appendChild(div);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/ReelElement.js\n **/"],"sourceRoot":""}